name: Run Katalon Tests

on:
  push:
    branches: [ master ]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Run Katalon Studio tests
        uses: katalon-studio/katalon-action@v2.0.10
        with:
          version: '8.6.5'
          projectPath: '.'
          args: >
            -noSplash -runMode=console 
            -projectPath="$(pwd)/cicdpipeline.prj"
            -testSuitePath="Test Suites/Guratan"
            -executionProfile="default"
            -browserType="Chrome"
          apiKey: ${{ secrets.KATALON_API_KEY }}
