name: Katalon Test Automation

on:
  push:
    branches: [ master ]
  workflow_dispatch:

jobs:
  katalon-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Run Katalon Tests
        uses: katalon-studio/katalon-action@v3.0
        with:
          version: '8.6.5'
          projectPath: '.'
          args: >
            -noSplash -runMode=console 
            -projectPath="$(pwd)/cicdpipeline.prj"
            -testSuitePath="Test Suites/Guratan"
            -executionProfile="default"
            -browserType="Chrome"
          apiKey: ${{ secrets.KATALON_API_KEY }}
